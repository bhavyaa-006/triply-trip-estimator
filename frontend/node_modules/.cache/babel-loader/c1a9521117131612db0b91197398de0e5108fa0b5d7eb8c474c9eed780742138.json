{"ast":null,"code":"import _objectSpread from\"C:/Users/arora/OneDrive/Documents/GitHub/triply/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect}from\"react\";import{FaRobot,FaUser}from\"react-icons/fa\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const chatContainerStyle={minHeight:\"100vh\",background:\"linear-gradient(135deg, #232b3b 0%, #181c24 100%)\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",padding:\"2rem\"};const chatBoxStyle={width:\"100%\",maxWidth:500,minHeight:400,background:\"rgba(30,34,44,0.97)\",borderRadius:\"22px\",boxShadow:\"0 8px 32px 0 rgba(31, 38, 135, 0.18)\",padding:\"2rem\",color:\"#fff\",display:\"flex\",flexDirection:\"column\",gap:\"1rem\",marginBottom:\"2rem\"};const messageStyle=isUser=>({alignSelf:isUser?\"flex-end\":\"flex-start\",background:isUser?\"linear-gradient(90deg, #a991f7 0%, #6e7ff3 100%)\":\"rgba(40,44,54,0.97)\",color:\"#fff\",borderRadius:\"16px\",padding:\"0.8rem 1.2rem\",margin:\"0.2rem 0\",maxWidth:\"80%\",display:\"flex\",alignItems:\"center\",gap:\"0.7rem\",fontSize:\"1.08rem\"});const buttonStyle={padding:\"1rem\",background:\"linear-gradient(90deg, #a991f7 0%, #6e7ff3 100%)\",color:\"#fff\",border:\"none\",borderRadius:\"10px\",fontWeight:700,fontSize:\"1.15rem\",cursor:\"pointer\",boxShadow:\"0 2px 12px rgba(118, 75, 162, 0.13)\",transition:\"background 0.2s\",fontFamily:\"'Montserrat', Segoe UI, sans-serif\"};export default function Chatbot(){const[messages,setMessages]=useState([{text:\"Hi! I'm your travel assistant. Ask me anything about your trip, places to eat, or sightseeing!\",isUser:false}]);const[input,setInput]=useState(\"\");const[loading,setLoading]=useState(false);const chatEndRef=useRef(null);useEffect(()=>{var _chatEndRef$current;(_chatEndRef$current=chatEndRef.current)===null||_chatEndRef$current===void 0?void 0:_chatEndRef$current.scrollIntoView({behavior:\"smooth\"});},[messages]);const sendMessage=async e=>{e.preventDefault();if(!input.trim())return;const userMsg={text:input,isUser:true};setMessages(msgs=>[...msgs,userMsg]);setInput(\"\");setLoading(true);try{const res=await fetch(\"/chat\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({message:input})// <-- FIXED KEY\n});const data=await res.json();if(data.reply){setMessages(msgs=>[...msgs,{text:data.reply,isUser:false}]);}else if(data.error){setMessages(msgs=>[...msgs,{text:\"Sorry, there was a problem connecting to the assistant.\",isUser:false}]);}}catch(_unused){setMessages(msgs=>[...msgs,{text:\"Sorry, there was a problem connecting to the assistant.\",isUser:false}]);}setLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{style:chatContainerStyle,children:[/*#__PURE__*/_jsxs(\"div\",{style:chatBoxStyle,children:[messages.map((msg,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:messageStyle(msg.isUser),children:[msg.isUser?/*#__PURE__*/_jsx(FaUser,{}):/*#__PURE__*/_jsx(FaRobot,{}),/*#__PURE__*/_jsx(\"span\",{children:msg.text})]},idx)),/*#__PURE__*/_jsx(\"div\",{ref:chatEndRef})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:sendMessage,style:{width:\"100%\",maxWidth:500,display:\"flex\",gap:\"1rem\"},children:[/*#__PURE__*/_jsx(\"input\",{style:{flex:1,padding:\"0.9rem\",borderRadius:\"12px\",border:\"1.5px solid #393e4a\",background:\"#232b3b\",color:\"#fff\",fontSize:\"1.1rem\"},placeholder:\"Ask me anything about your trip...\",value:input,onChange:e=>setInput(e.target.value),disabled:loading}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:_objectSpread(_objectSpread({},buttonStyle),{},{opacity:loading||!input.trim()?0.7:1}),disabled:loading||!input.trim(),children:loading?\"...\":\"Send\"})]})]});}","map":{"version":3,"names":["React","useState","useRef","useEffect","FaRobot","FaUser","jsx","_jsx","jsxs","_jsxs","chatContainerStyle","minHeight","background","display","flexDirection","alignItems","justifyContent","padding","chatBoxStyle","width","maxWidth","borderRadius","boxShadow","color","gap","marginBottom","messageStyle","isUser","alignSelf","margin","fontSize","buttonStyle","border","fontWeight","cursor","transition","fontFamily","Chatbot","messages","setMessages","text","input","setInput","loading","setLoading","chatEndRef","_chatEndRef$current","current","scrollIntoView","behavior","sendMessage","e","preventDefault","trim","userMsg","msgs","res","fetch","method","headers","body","JSON","stringify","message","data","json","reply","error","_unused","style","children","map","msg","idx","ref","onSubmit","flex","placeholder","value","onChange","target","disabled","type","_objectSpread","opacity"],"sources":["C:/Users/arora/OneDrive/Documents/GitHub/triply/frontend/src/chatbot.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport { FaRobot, FaUser } from \"react-icons/fa\";\r\n\r\nconst chatContainerStyle = {\r\n  minHeight: \"100vh\",\r\n  background: \"linear-gradient(135deg, #232b3b 0%, #181c24 100%)\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  padding: \"2rem\"\r\n};\r\n\r\nconst chatBoxStyle = {\r\n  width: \"100%\",\r\n  maxWidth: 500,\r\n  minHeight: 400,\r\n  background: \"rgba(30,34,44,0.97)\",\r\n  borderRadius: \"22px\",\r\n  boxShadow: \"0 8px 32px 0 rgba(31, 38, 135, 0.18)\",\r\n  padding: \"2rem\",\r\n  color: \"#fff\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  gap: \"1rem\",\r\n  marginBottom: \"2rem\"\r\n};\r\n\r\nconst messageStyle = (isUser) => ({\r\n  alignSelf: isUser ? \"flex-end\" : \"flex-start\",\r\n  background: isUser\r\n    ? \"linear-gradient(90deg, #a991f7 0%, #6e7ff3 100%)\"\r\n    : \"rgba(40,44,54,0.97)\",\r\n  color: \"#fff\",\r\n  borderRadius: \"16px\",\r\n  padding: \"0.8rem 1.2rem\",\r\n  margin: \"0.2rem 0\",\r\n  maxWidth: \"80%\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  gap: \"0.7rem\",\r\n  fontSize: \"1.08rem\"\r\n});\r\n\r\nconst buttonStyle = {\r\n  padding: \"1rem\",\r\n  background: \"linear-gradient(90deg, #a991f7 0%, #6e7ff3 100%)\",\r\n  color: \"#fff\",\r\n  border: \"none\",\r\n  borderRadius: \"10px\",\r\n  fontWeight: 700,\r\n  fontSize: \"1.15rem\",\r\n  cursor: \"pointer\",\r\n  boxShadow: \"0 2px 12px rgba(118, 75, 162, 0.13)\",\r\n  transition: \"background 0.2s\",\r\n  fontFamily: \"'Montserrat', Segoe UI, sans-serif\"\r\n};\r\n\r\nexport default function Chatbot() {\r\n  const [messages, setMessages] = useState([\r\n    {\r\n      text: \"Hi! I'm your travel assistant. Ask me anything about your trip, places to eat, or sightseeing!\",\r\n      isUser: false\r\n    }\r\n  ]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const chatEndRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    chatEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  const sendMessage = async (e) => {\r\n    e.preventDefault();\r\n    if (!input.trim()) return;\r\n    const userMsg = { text: input, isUser: true };\r\n    setMessages((msgs) => [...msgs, userMsg]);\r\n    setInput(\"\");\r\n    setLoading(true);\r\n\r\n    try {\r\n      const res = await fetch(\"/chat\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ message: input }) // <-- FIXED KEY\r\n      });\r\n      const data = await res.json();\r\n      if (data.reply) {\r\n        setMessages((msgs) => [\r\n          ...msgs,\r\n          { text: data.reply, isUser: false }\r\n        ]);\r\n      } else if (data.error) {\r\n        setMessages((msgs) => [\r\n          ...msgs,\r\n          { text: \"Sorry, there was a problem connecting to the assistant.\", isUser: false }\r\n        ]);\r\n      }\r\n    } catch {\r\n      setMessages((msgs) => [\r\n        ...msgs,\r\n        { text: \"Sorry, there was a problem connecting to the assistant.\", isUser: false }\r\n      ]);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div style={chatContainerStyle}>\r\n      <div style={chatBoxStyle}>\r\n        {messages.map((msg, idx) => (\r\n          <div key={idx} style={messageStyle(msg.isUser)}>\r\n            {msg.isUser ? <FaUser /> : <FaRobot />}\r\n            <span>{msg.text}</span>\r\n          </div>\r\n        ))}\r\n        <div ref={chatEndRef} />\r\n      </div>\r\n      <form\r\n        onSubmit={sendMessage}\r\n        style={{ width: \"100%\", maxWidth: 500, display: \"flex\", gap: \"1rem\" }}\r\n      >\r\n        <input\r\n          style={{\r\n            flex: 1,\r\n            padding: \"0.9rem\",\r\n            borderRadius: \"12px\",\r\n            border: \"1.5px solid #393e4a\",\r\n            background: \"#232b3b\",\r\n            color: \"#fff\",\r\n            fontSize: \"1.1rem\"\r\n          }}\r\n          placeholder=\"Ask me anything about your trip...\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          disabled={loading}\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          style={{\r\n            ...buttonStyle,\r\n            opacity: loading || !input.trim() ? 0.7 : 1\r\n          }}\r\n          disabled={loading || !input.trim()}\r\n        >\r\n          {loading ? \"...\" : \"Send\"}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}